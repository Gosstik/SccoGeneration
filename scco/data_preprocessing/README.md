# Микросервис предобработки

Осуществляет принятие сообщений от парсер-бота, их предобработку и передачу ML-сервису.

Далее заказчик (customer) - пользователь сервиса генерации КП, а клиент (client) - его потенциальный клиент;
тот, кому пользователь сервиса отправляет КП.

# Rabbit-интерфейс сервиса

## Сообщение от бота-парсера сообщений

Формат данных: json-объект, содержащий поле `customer_id` - идентификатор заказчика и `parsed_csv` - URL csv-файла, в котором лежат сообщения.

Столбцы csv-файла: `Channel_name, Sender_id, Message, Message_date`.

Сообщение отправляется через безымянный exchange в очередь с названием `in_queue` из config-файла.

## Сообщение в ML-сервис

Формат данных: json-объект, содержащий следующие поля:
1. `customer_id`: Id заказчика
2. `client_id`: Id клиента
3. `channel_id`: Id канала
4. `messages`: Массив из сообщений (для которых совпадают первые 3 поля)
5. `message_dates`: Массив из дат сообщений (для соответствующих сообщений выше)

Сообщение отправляется через безымянный exchange в очередь с названием `out_queue` из config-файла.
